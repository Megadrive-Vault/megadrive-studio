///////////////////////////////////////////////////////////////////////////////
// Emulator plugin definition
//
//
// 
///////////////////////////////////////////////////////////////////////////////
// Includes 
#include "include/mdShared.h"
#include "include/mdDefaultPlugin.h"
#include "include/mdOutputDataPlugin.h"

///////////////////////////////////////////////////////////////////////////////
// Constructor
///////////////////////////////////////////////////////////////////////////////

mdOutputDataPlugin::mdOutputDataPlugin(const wxString &filename):mdDefaultPlugin(filename)
{
	m_fctGetOuputType=NULL;
	m_fctOutputPicture=NULL;

	GetSymbols();
}

///////////////////////////////////////////////////////////////////////////////
// GetSymbols
///////////////////////////////////////////////////////////////////////////////

void mdOutputDataPlugin::GetSymbols(void)
{
	if(m_Library->IsLoaded()==TRUE)
	{			
		m_fctGetOuputType=(fctGetOutputType) m_Library->GetSymbol("GetOutputType");
		m_fctOutputPicture=(fctOutputPicture) m_Library->GetSymbol("OutputPicture");		
	}
}


///////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////

int mdOutputDataPlugin::OutputPicture(wxString& filename,mdPictureInfo *info,unsigned char* pixels,mdColor *pal)
{
	int ret=0;
	
	if(m_Library->IsLoaded()==TRUE)
	{	if(m_fctOutputPicture)
			return m_fctOutputPicture((char*)filename.c_str(),info,pixels,pal);
	}
	return 0;

}


///////////////////////////////////////////////////////////////////////////////